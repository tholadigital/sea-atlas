<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> 
<html> <!--<![endif]-->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="description" content="Sea Atlas Data tools">
  
  <meta name="author" content="Themefisher.com">

  <title>Sea Atlas.</title>

<!-- Mobile Specific Meta
  ================================================== -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="images/favicon.png" />
  
  <!-- CSS
  ================================================== -->
  <!-- Themefisher Icon font -->
  <link rel="stylesheet" href="plugins/themefisher-font/style.css">
  <!-- bootstrap.min css -->
  <link rel="stylesheet" href="plugins/bootstrap/css/bootstrap.min.css">
  <!-- Lightbox.min css -->
  <link rel="stylesheet" href="plugins/lightbox2/dist/css/lightbox.min.css">
  <!-- animation css -->
  <link rel="stylesheet" href="plugins/animate/animate.css">
  <!-- Slick Carousel -->
  <link rel="stylesheet" href="plugins/slick/slick.css">
  <!-- Main Stylesheet -->
  <link rel="stylesheet" href="css/style.css">  
      <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>


</head>

<body id="body">

 <!--
  Start Preloader
  ==================================== -->
  <div id="preloader">
    <div class='preloader'>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div> 
  <!--
  End Preloader
  ==================================== -->
<header style="background-color: #2a7ca4;" class="navigation fixed-top">
  <div class="container">
    <!-- main nav -->
    <nav class="navbar navbar-expand-lg navbar-light">
      <!-- logo -->
      <a class="navbar-brand logo" href="index.html">
        <img class="logo-default" src="images/logo.png" alt="logo"/>
        <img style="height: 50px;" class="logo-white" src="images/logo-white.png" alt="logo"/>
      </a>
      <!-- /logo -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
        aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navigation">
        <ul class="navbar-nav ml-auto text-center">
          <li class="nav-item ">
           <!-- <a class="nav-link" href="mailto:info@rino27.com">Contact</a>-->
          </li>
        </ul>
      </div>
    </nav>
    <!-- /main nav -->
  </div>
</header>
<!-- -->
<section style="background-color: #083648;" class="service-2 section">
  <div class="container">
    <div class="row">

      <div class="col-7">
        <!-- section title -->
        <div  class="text-left">
          <p id="infoText" style="color: white">Use the map below to locate the beach where you'd like to place the SharkSafeBarrier </p>
        </div>
        <!-- /section title -->
      </div>

      
     
      <div class="col-md-8">
        <div class="row">
          <div class="col-md-10">

             <div id="map" style="height: 400px"></div>

<!--
        <iframe
            width="600"
            height="450"
            style="border:0"
            loading="lazy"
            allowfullscreen
            referrerpolicy="no-referrer-when-downgrade"
            src="https://www.google.com/maps/embed/v1/place?key=AIzaSyAAhS_gF5O_0hj8x1PPOQEMwixqv4maF4s&q=Platternburg+bay">
          </iframe>-->
          </div><!-- END COL -->
          <div class="col-md-10 text-right">
            <br>
             <button onclick="changeInfoText()" type="button" class="btn btn-info btn-lg" style="color: black;">Next</button>
          </div>

        </div>
      </div>
    </div> <!-- End row -->
  </div> <!-- End container -->
</section> <!-- End section -->

  
<footer id="footer" class="bg-one" style="background-color: #083648;">
 
    <img src="images/footer.png" style="width: 100%">

</footer>

<div class="modal fade right" id="exampleModal" tabindex="-1" role="dialog">

<div class="container">
   

  <div class="row">
    <div class="col">
    </div>

    <div class="col">
      <br>
      <br>
      <br>
        <div  class="modal-dialog" role="document">
          <div class="modal-content">
      <div class="modal-header">
        <h5 id="modalTl" class="modal-title">Modal title</h5>
        <button type="button" onclick="unzoomMap()" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div id="modalBd" class="modal-body">
        <p>Modal body text goes here.</p>
      </div>
      <div class="modal-footer">
        <button type="button" onclick="unzoomMap()" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
    </div>
  </div>
</div>



</div>

  
    <!-- 
    Essential Scripts
    =====================================-->
    <!-- Main jQuery -->
    <script src="plugins/jquery/jquery.min.js"></script>
    <!-- Google Map -->

   <!-- Bootstrap4 -->
    <script src="plugins/bootstrap/js/bootstrap.min.js"></script>
    <!-- Parallax -->
    <script src="plugins/parallax/jquery.parallax-1.1.3.js"></script>
    <!-- lightbox -->
    <script src="plugins/lightbox2/dist/js/lightbox.min.js"></script>
    <!-- Owl Carousel -->
    <script src="plugins/slick/slick.min.js"></script>
    <!-- filter -->
    <script src="plugins/filterizr/jquery.filterizr.min.js"></script>
    <!-- Smooth Scroll js -->
    <script src="plugins/smooth-scroll/smooth-scroll.min.js"></script>
    
    <!-- Custom js -->
    <script src="js/script.js"></script>

      <script type="text/javascript">
        function unzoomMap(){
            map.setZoom(10);
        }
   // Initialize and add the map
   var map ;
        function initMap() {
          console.log("initMap hello")
          // The location of Uluru
          const uluru = { lat: -34.0575, lng: 23.3645 };
          // The map, centered at Uluru
           map = new google.maps.Map(document.getElementById("map"), {
            zoom: 10,
            center: uluru,
          });
      


        }

      function markerPopup(posit){
        console.log("markerPopup", posit)
        $('#exampleModal').modal('show');
        modalTl.innerText = `${posit.lat()} , ${posit.lng()}`
        var m1=`${(Math.random()*8)}`.slice(0,3)
        var m2 = `${(Math.random()*6)}`.slice(0,3)
        modalBd.innerHTML = `<h2>depth</h2><h>${m1}m</h><h2>Mid-tide</h2><h>${m2}m</h>`
      }
      var locations = [];
        function placeMarker(location) {
          console.log(location.lng())
          locations.push({lat:location.lat(),lng:location.lng()})
            var marker = new google.maps.Marker({
                position: location, 
                map: map
            });

              marker.addListener("click", () => {
                map.setZoom(12);
                map.setCenter(marker.getPosition());
                markerPopup(marker.getPosition())
              });
        }

        var currentStep = ""

          function changeInfoText(){
            if(currentStep=="dropPins"){
                const flightPath = new google.maps.Polyline({
                  path: locations,
                  geodesic: true,
                  strokeColor: "#FF0000",
                  strokeOpacity: 1.0,
                  strokeWeight: 2,
                });
                flightPath.setMap(map);
                infoText.innerText = "select a pin to find out the depth and mid tide values at those coordinates"
            }

            else{

              currentStep="dropPins"
            //  console.log(currentStep)
              infoText.innerText = "Drop pins along the beach where the safe barrier may be placed. You can drop between 2-6 pins. Then, the map will generate a line between your chosen points."

                google.maps.event.addListener(map, 'click', function(event) {
                   placeMarker(event.latLng);
                });
                
            }
            
            }

        window.initMap = initMap;
    </script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAAhS_gF5O_0hj8x1PPOQEMwixqv4maF4s&callback=initMap&v=weekly"
      defer
    ></script>

  </body>
  </html>
